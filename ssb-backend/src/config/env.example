# Smart School Bus Tracking System - Environment Variables Example
# Copy this file to .env in the root directory and update the values

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3000
NODE_ENV=development
HOST=0.0.0.0

# =============================================================================
# Frontend Configuration (CORS)
# =============================================================================
# Multiple origins separated by comma for LAN/dev
FE_ORIGIN=http://localhost:3000,http://10.203.182.34:3000

# =============================================================================
# Database Configuration (MySQL)
# =============================================================================
DB_HOST=localhost                    # or 127.0.0.1 (single value, not comma-separated)
DB_PORT=3306
DB_USER=root
DB_PASSWORD=                         # Preferred (db.js uses DB_PASSWORD first, then DB_PASS)
DB_PASS=                             # Alternative (for backward compatibility)
DB_NAME=school_bus_system

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE=10000
DB_POOL_ACQUIRE=60000
DB_POOL_EVICT=1000

# =============================================================================
# JWT Configuration
# =============================================================================
JWT_SECRET=change_me
JWT_REFRESH_SECRET=change_me_refresh
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
SESSION_SECRET=change_me_session_secret
BCRYPT_ROUNDS=10

# =============================================================================
# Redis / Cache (for Maps API responses)
# =============================================================================
CACHE_DRIVER=redis                   # or memory (fallback if Redis unavailable)
REDIS_URL=redis://127.0.0.1:6379    # Primary connection string

# =============================================================================
# WebSocket Configuration
# =============================================================================
WS_ENABLED=true                      # Enable/disable Socket.IO server
REDIS_HOST=127.0.0.1                # Optional, used by env.ts if REDIS_URL not provided
REDIS_PORT=6379                     # Optional, used by env.ts
REDIS_PASSWORD=                     # Optional, used by env.ts

# Cache TTL for Maps API (seconds)
CACHE_TTL_DIRECTIONS=21600          # 6h
CACHE_TTL_DISTANCE_MATRIX=120       # 2m (MapsService uses this name)
CACHE_TTL_GEOCODE=86400             # 24h
CACHE_TTL_ROADS=900                 # 15m

# =============================================================================
# Google Maps API Configuration
# =============================================================================
MAPS_API_KEY=                        # Required for Maps API endpoints

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# General API rate limiting (used by server.ts)
RATE_LIMIT_WINDOW_MS=900000         # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Maps API rate limiting (per IP + params, used by mapsLimiter.js)
RL_WINDOW=60                        # Window in seconds
RL_MAX_MATRIX=60                    # Max requests per window for Distance Matrix
RL_MAX_DIRECTIONS=30                # Max requests per window for Directions

# =============================================================================
# Firebase Configuration (push notifications & realtime sync)
# =============================================================================
FIREBASE_PROJECT_ID=
FIREBASE_PRIVATE_KEY=
FIREBASE_CLIENT_EMAIL=
FIREBASE_DB_URL=

# =============================================================================
# Email Configuration (notifications)
# =============================================================================
# NOTE: env.ts uses SMTP_* prefix (not EMAIL_*)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# =============================================================================
# Socket.IO Configuration
# =============================================================================
# NOTE: env.ts uses SOCKET_CORS_ORIGIN (falls back to FE_ORIGIN if not set)
SOCKET_CORS_ORIGIN=                 # Optional, defaults to FE_ORIGIN
SOCKET_IO_PING_TIMEOUT=60000
SOCKET_IO_PING_INTERVAL=25000

# =============================================================================
# API Configuration
# =============================================================================
API_PREFIX=/api/v1
API_TIMEOUT=30000

# =============================================================================
# Logging / Monitoring
# =============================================================================
LOG_LEVEL=info
LOG_FILE=logs/app.log
DEBUG_MODE=false
VERBOSE_LOGGING=false
HEALTH_CHECK_INTERVAL=30000
METRICS_ENABLED=true
SENTRY_DSN=                          # Optional, for error tracking

# =============================================================================
# File Upload
# =============================================================================
MAX_FILE_SIZE=5242880                # 5MB in bytes
UPLOAD_PATH=uploads/

# =============================================================================
# Notifications & Domain Features
# =============================================================================
NOTIFICATION_ENABLED=true
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_SMS_ENABLED=false
NOTIFICATION_PUSH_ENABLED=true

# =============================================================================
# Geofencing / Trip / Alert
# =============================================================================
GEOFENCE_RADIUS=60                   # in meters
GEOFENCE_CHECK_INTERVAL=30000        # in milliseconds
TRIP_TIMEOUT=7200000                 # 2 hours in milliseconds
TRIP_CHECK_INTERVAL=60000            # 1 minute in milliseconds
ALERT_DELAY_THRESHOLD=300000         # 5 minutes in milliseconds
ALERT_CHECK_INTERVAL=60000           # 1 minute in milliseconds

# =============================================================================
# Development Flags
# =============================================================================
MOCK_DATA_ENABLED=false
