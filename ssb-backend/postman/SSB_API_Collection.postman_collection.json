{
  "info": {
    "name": "Smart School Bus Tracking System API",
    "description": "Complete API collection for SSB system - 56 endpoints covering Auth, Buses, Drivers, Students, Routes, Schedules, and Trips",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "ssb-api-v1",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:4000/api/v1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Register - Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has success true', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@ssb.com\",\n  \"matKhau\": \"Admin@123\",\n  \"hoTen\": \"Quản Trị Viên\",\n  \"soDienThoai\": \"0901234567\",\n  \"vaiTro\": \"quan_tri\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Đăng ký tài khoản quản trị viên mới"
          },
          "response": []
        },
        {
          "name": "Register - Driver",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"driver1@ssb.com\",\n  \"matKhau\": \"Driver@123\",\n  \"hoTen\": \"Nguyễn Văn Tài\",\n  \"soDienThoai\": \"0912345678\",\n  \"vaiTro\": \"tai_xe\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Đăng ký tài khoản tài xế mới"
          },
          "response": []
        },
        {
          "name": "Register - Parent",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"parent1@gmail.com\",\n  \"matKhau\": \"Parent@123\",\n  \"hoTen\": \"Trần Thị Mai\",\n  \"soDienThoai\": \"0923456789\",\n  \"vaiTro\": \"phu_huynh\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Đăng ký tài khoản phụ huynh mới"
          },
          "response": []
        },
        {
          "name": "Login - Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has token', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.token).to.be.a('string');",
                  "    pm.environment.set('token', jsonData.data.token);",
                  "    pm.environment.set('userId', jsonData.data.user.maNguoiDung);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@ssb.com\",\n  \"matKhau\": \"Admin@123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Đăng nhập với tài khoản admin và lưu token"
          },
          "response": []
        },
        {
          "name": "Get Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has user data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('email');",
                  "    pm.expect(jsonData.data).to.have.property('hoTen');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            },
            "description": "Lấy thông tin profile của user đang đăng nhập"
          },
          "response": []
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hoTen\": \"Quản Trị Viên Updated\",\n  \"soDienThoai\": \"0901234568\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            },
            "description": "Cập nhật thông tin profile"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Đăng xuất khỏi hệ thống"
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints - Register, Login, Profile"
    },
    {
      "name": "2. Buses",
      "item": [
        {
          "name": "Get All Buses",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has pagination', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('pagination');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/buses?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["buses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "hoat_dong",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách tất cả xe buýt với pagination"
          },
          "response": []
        },
        {
          "name": "Get Bus by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has bus data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('bienSoXe');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/buses/{{busId}}",
              "host": ["{{baseUrl}}"],
              "path": ["buses", "{{busId}}"]
            },
            "description": "Lấy thông tin chi tiết một xe buýt"
          },
          "response": []
        },
        {
          "name": "Create Bus",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save bus ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('busId', jsonData.data.maXe);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bienSoXe\": \"29A-12345\",\n  \"dongXe\": \"Hyundai County\",\n  \"sucChua\": 29,\n  \"trangThai\": \"hoat_dong\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/buses",
              "host": ["{{baseUrl}}"],
              "path": ["buses"]
            },
            "description": "Tạo xe buýt mới"
          },
          "response": []
        },
        {
          "name": "Update Bus",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dongXe\": \"Hyundai County Deluxe\",\n  \"sucChua\": 30,\n  \"trangThai\": \"hoat_dong\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/buses/{{busId}}",
              "host": ["{{baseUrl}}"],
              "path": ["buses", "{{busId}}"]
            },
            "description": "Cập nhật thông tin xe buýt"
          },
          "response": []
        },
        {
          "name": "Assign Driver to Bus",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"driverId\": \"{{driverId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/buses/{{busId}}/assign-driver",
              "host": ["{{baseUrl}}"],
              "path": ["buses", "{{busId}}", "assign-driver"]
            },
            "description": "Phân công tài xế cho xe buýt"
          },
          "response": []
        },
        {
          "name": "Update Bus Position (GPS)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lat\": 21.0285,\n  \"lng\": 105.8542,\n  \"speed\": 45,\n  \"heading\": 90,\n  \"timestamp\": \"{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/buses/{{busId}}/position",
              "host": ["{{baseUrl}}"],
              "path": ["buses", "{{busId}}", "position"]
            },
            "description": "Cập nhật vị trí GPS của xe buýt (Real-time)"
          },
          "response": []
        },
        {
          "name": "Delete Bus",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/buses/{{busId}}",
              "host": ["{{baseUrl}}"],
              "path": ["buses", "{{busId}}"]
            },
            "description": "Xóa xe buýt"
          },
          "response": []
        }
      ],
      "description": "Bus management endpoints - CRUD operations, driver assignment, GPS tracking"
    },
    {
      "name": "3. Drivers",
      "item": [
        {
          "name": "Get All Drivers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/drivers?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["drivers"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "hoat_dong",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách tất cả tài xế"
          },
          "response": []
        },
        {
          "name": "Get Driver by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/drivers/{{driverId}}",
              "host": ["{{baseUrl}}"],
              "path": ["drivers", "{{driverId}}"]
            },
            "description": "Lấy thông tin chi tiết tài xế"
          },
          "response": []
        },
        {
          "name": "Create Driver",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save driver ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('driverId', jsonData.data.maTaiXe);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hoTen\": \"Nguyễn Văn Tài\",\n  \"email\": \"nvtai@ssb.com\",\n  \"soDienThoai\": \"0987654321\",\n  \"matKhau\": \"Driver@123\",\n  \"soBangLai\": \"B2-123456789\",\n  \"ngayHetHanBangLai\": \"2027-12-31\",\n  \"soNamKinhNghiem\": 5,\n  \"trangThai\": \"hoat_dong\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/drivers",
              "host": ["{{baseUrl}}"],
              "path": ["drivers"]
            },
            "description": "Tạo tài xế mới"
          },
          "response": []
        },
        {
          "name": "Update Driver",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hoTen\": \"Nguyễn Văn Tài (Updated)\",\n  \"soNamKinhNghiem\": 6,\n  \"trangThai\": \"hoat_dong\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/drivers/{{driverId}}",
              "host": ["{{baseUrl}}"],
              "path": ["drivers", "{{driverId}}"]
            },
            "description": "Cập nhật thông tin tài xế"
          },
          "response": []
        },
        {
          "name": "Get Driver Schedules",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/drivers/{{driverId}}/schedules",
              "host": ["{{baseUrl}}"],
              "path": ["drivers", "{{driverId}}", "schedules"],
              "query": [
                {
                  "key": "date",
                  "value": "2025-10-27",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy lịch trình được phân công cho tài xế"
          },
          "response": []
        },
        {
          "name": "Get Driver Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/drivers/stats",
              "host": ["{{baseUrl}}"],
              "path": ["drivers", "stats"]
            },
            "description": "Lấy thống kê tài xế"
          },
          "response": []
        },
        {
          "name": "Delete Driver",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/drivers/{{driverId}}",
              "host": ["{{baseUrl}}"],
              "path": ["drivers", "{{driverId}}"]
            },
            "description": "Xóa tài xế"
          },
          "response": []
        }
      ],
      "description": "Driver management endpoints"
    },
    {
      "name": "4. Students",
      "item": [
        {
          "name": "Get All Students",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/students?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["students"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "lop",
                  "value": "1A",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách học sinh"
          },
          "response": []
        },
        {
          "name": "Get Student by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/students/{{studentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["students", "{{studentId}}"]
            },
            "description": "Lấy thông tin chi tiết học sinh"
          },
          "response": []
        },
        {
          "name": "Get Students by Class",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/students/class/1A",
              "host": ["{{baseUrl}}"],
              "path": ["students", "class", "1A"]
            },
            "description": "Lấy danh sách học sinh theo lớp"
          },
          "response": []
        },
        {
          "name": "Create Student",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save student ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('studentId', jsonData.data.maHocSinh);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hoTen\": \"Nguyễn Văn An\",\n  \"ngaySinh\": \"2015-05-15\",\n  \"lop\": \"1A\",\n  \"maPhuHuynh\": null,\n  \"diaChi\": \"123 Đường ABC, Quận 1, TP.HCM\",\n  \"anhDaiDien\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/students",
              "host": ["{{baseUrl}}"],
              "path": ["students"]
            },
            "description": "Tạo học sinh mới"
          },
          "response": []
        },
        {
          "name": "Update Student",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lop\": \"2A\",\n  \"diaChi\": \"456 Đường XYZ, Quận 2, TP.HCM\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/students/{{studentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["students", "{{studentId}}"]
            },
            "description": "Cập nhật thông tin học sinh"
          },
          "response": []
        },
        {
          "name": "Get Student Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/students/stats",
              "host": ["{{baseUrl}}"],
              "path": ["students", "stats"]
            },
            "description": "Lấy thống kê học sinh"
          },
          "response": []
        },
        {
          "name": "Delete Student",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/students/{{studentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["students", "{{studentId}}"]
            },
            "description": "Xóa học sinh"
          },
          "response": []
        }
      ],
      "description": "Student management endpoints"
    },
    {
      "name": "5. Routes",
      "item": [
        {
          "name": "Get All Routes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/routes?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["routes"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "trangThai",
                  "value": "hoat_dong",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách tuyến đường"
          },
          "response": []
        },
        {
          "name": "Get Route by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}"]
            },
            "description": "Lấy thông tin chi tiết tuyến đường"
          },
          "response": []
        },
        {
          "name": "Create Route",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save route ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('routeId', jsonData.data.maTuyen);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tenTuyen\": \"Tuyến 1 - Quận 1 đến Trường ABC\",\n  \"moTa\": \"Tuyến đưa đón học sinh khu vực trung tâm\",\n  \"diemBatDau\": \"Bến xe Quận 1\",\n  \"diemKetThuc\": \"Trường Tiểu học ABC\",\n  \"khoangCach\": 15.5,\n  \"thoiGianDuKien\": 45,\n  \"trangThai\": \"hoat_dong\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/routes",
              "host": ["{{baseUrl}}"],
              "path": ["routes"]
            },
            "description": "Tạo tuyến đường mới"
          },
          "response": []
        },
        {
          "name": "Update Route",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"moTa\": \"Tuyến đưa đón học sinh khu vực trung tâm (Updated)\",\n  \"khoangCach\": 16.0,\n  \"thoiGianDuKien\": 50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}"]
            },
            "description": "Cập nhật tuyến đường"
          },
          "response": []
        },
        {
          "name": "Get Route Stops",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}/stops",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}", "stops"],
              "query": [
                {
                  "key": "sortBy",
                  "value": "thuTu",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách điểm dừng của tuyến"
          },
          "response": []
        },
        {
          "name": "Add Stop to Route",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save stop ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('stopId', jsonData.data.maDiem);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tenDiem\": \"Ngã tư Lê Lợi - Nguyễn Huệ\",\n  \"diaChi\": \"Ngã tư Lê Lợi - Nguyễn Huệ, Quận 1\",\n  \"viDo\": 10.7755,\n  \"kinhDo\": 106.7011,\n  \"thuTu\": 1,\n  \"thoiGianDung\": 2,\n  \"moTa\": \"Điểm đón đầu tiên\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}/stops",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}", "stops"]
            },
            "description": "Thêm điểm dừng vào tuyến"
          },
          "response": []
        },
        {
          "name": "Update Stop",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"thoiGianDung\": 3,\n  \"moTa\": \"Điểm đón đầu tiên (Updated)\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}/stops/{{stopId}}",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}", "stops", "{{stopId}}"]
            },
            "description": "Cập nhật điểm dừng"
          },
          "response": []
        },
        {
          "name": "Delete Stop from Route",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}/stops/{{stopId}}",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}", "stops", "{{stopId}}"]
            },
            "description": "Xóa điểm dừng khỏi tuyến"
          },
          "response": []
        },
        {
          "name": "Get Route Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/routes/stats",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "stats"]
            },
            "description": "Lấy thống kê tuyến đường"
          },
          "response": []
        },
        {
          "name": "Delete Route",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/routes/{{routeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["routes", "{{routeId}}"]
            },
            "description": "Xóa tuyến đường"
          },
          "response": []
        }
      ],
      "description": "Route management endpoints - Routes and Stops"
    },
    {
      "name": "6. Schedules",
      "item": [
        {
          "name": "Get All Schedules",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schedules?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["schedules"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "maTuyen",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "maXe",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "maTaiXe",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "loaiChuyen",
                  "value": "di",
                  "disabled": true
                },
                {
                  "key": "dangApDung",
                  "value": "true",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách lịch trình"
          },
          "response": []
        },
        {
          "name": "Get Schedule by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schedules/{{scheduleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["schedules", "{{scheduleId}}"]
            },
            "description": "Lấy thông tin chi tiết lịch trình"
          },
          "response": []
        },
        {
          "name": "Get Schedules by Date",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schedules/date/2025-10-27",
              "host": ["{{baseUrl}}"],
              "path": ["schedules", "date", "2025-10-27"],
              "query": [
                {
                  "key": "maTuyen",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "loaiChuyen",
                  "value": "di",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy lịch trình theo ngày"
          },
          "response": []
        },
        {
          "name": "Create Schedule",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save schedule ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('scheduleId', jsonData.data.maLichTrinh);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"maTuyen\": \"{{routeId}}\",\n  \"maXe\": \"{{busId}}\",\n  \"maTaiXe\": \"{{driverId}}\",\n  \"loaiChuyen\": \"di\",\n  \"gioKhoiHanh\": \"07:00\",\n  \"dangApDung\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schedules",
              "host": ["{{baseUrl}}"],
              "path": ["schedules"]
            },
            "description": "Tạo lịch trình mới (với conflict checking)"
          },
          "response": []
        },
        {
          "name": "Update Schedule",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gioKhoiHanh\": \"07:15\",\n  \"dangApDung\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schedules/{{scheduleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["schedules", "{{scheduleId}}"]
            },
            "description": "Cập nhật lịch trình"
          },
          "response": []
        },
        {
          "name": "Update Schedule Status (Real-time)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"trangThai\": \"dang_chay\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schedules/{{scheduleId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["schedules", "{{scheduleId}}", "status"]
            },
            "description": "Cập nhật trạng thái lịch trình và phát sự kiện Socket.IO"
          },
          "response": []
        },
        {
          "name": "Get Schedule Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schedules/stats",
              "host": ["{{baseUrl}}"],
              "path": ["schedules", "stats"]
            },
            "description": "Lấy thống kê lịch trình"
          },
          "response": []
        },
        {
          "name": "Delete Schedule",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schedules/{{scheduleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["schedules", "{{scheduleId}}"]
            },
            "description": "Xóa lịch trình"
          },
          "response": []
        }
      ],
      "description": "Schedule management endpoints with conflict checking and real-time updates"
    },
    {
      "name": "7. Trips",
      "item": [
        {
          "name": "Get All Trips",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/trips?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["trips"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "ngayChay",
                  "value": "2025-10-27",
                  "disabled": true
                },
                {
                  "key": "trangThai",
                  "value": "dang_chay",
                  "disabled": true
                },
                {
                  "key": "maTuyen",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "maXe",
                  "value": "",
                  "disabled": true
                }
              ]
            },
            "description": "Lấy danh sách chuyến đi"
          },
          "response": []
        },
        {
          "name": "Get Trip by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}"]
            },
            "description": "Lấy thông tin chi tiết chuyến đi"
          },
          "response": []
        },
        {
          "name": "Create Trip",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save trip ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('tripId', jsonData.data.maChuyen);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"maLichTrinh\": \"{{scheduleId}}\",\n  \"ngayChay\": \"2025-10-27\",\n  \"trangThai\": \"chua_khoi_hanh\",\n  \"ghiChu\": \"Chuyến đi buổi sáng\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips",
              "host": ["{{baseUrl}}"],
              "path": ["trips"]
            },
            "description": "Tạo chuyến đi mới"
          },
          "response": []
        },
        {
          "name": "Update Trip",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ghiChu\": \"Chuyến đi buổi sáng (Updated)\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}"]
            },
            "description": "Cập nhật chuyến đi"
          },
          "response": []
        },
        {
          "name": "Start Trip",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gioBatDauThucTe\": \"07:05\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}/start",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}", "start"]
            },
            "description": "Bắt đầu chuyến đi (Real-time Socket.IO event)"
          },
          "response": []
        },
        {
          "name": "End Trip",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gioKetThucThucTe\": \"08:30\",\n  \"ghiChu\": \"Hoàn thành tốt\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}/end",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}", "end"]
            },
            "description": "Kết thúc chuyến đi (Real-time Socket.IO event)"
          },
          "response": []
        },
        {
          "name": "Cancel Trip",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lyDoHuy\": \"Xe hỏng\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}", "cancel"]
            },
            "description": "Hủy chuyến đi (Real-time Socket.IO event)"
          },
          "response": []
        },
        {
          "name": "Add Student to Trip",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"maHocSinh\": \"{{studentId}}\",\n  \"trangThai\": \"dang_cho\",\n  \"ghiChu\": \"Học sinh lên xe tại điểm 1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}/students",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}", "students"]
            },
            "description": "Thêm học sinh vào chuyến đi"
          },
          "response": []
        },
        {
          "name": "Update Student Status in Trip",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"trangThai\": \"da_len_xe\",\n  \"ghiChu\": \"Đã lên xe lúc 07:10\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}/students/{{studentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}", "students", "{{studentId}}"]
            },
            "description": "Cập nhật trạng thái học sinh trong chuyến đi"
          },
          "response": []
        },
        {
          "name": "Get Trip Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/trips/stats?from=2025-10-01&to=2025-10-27",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "stats"],
              "query": [
                {
                  "key": "from",
                  "value": "2025-10-01"
                },
                {
                  "key": "to",
                  "value": "2025-10-27"
                }
              ]
            },
            "description": "Lấy thống kê chuyến đi theo khoảng thời gian"
          },
          "response": []
        },
        {
          "name": "Delete Trip",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/trips/{{tripId}}",
              "host": ["{{baseUrl}}"],
              "path": ["trips", "{{tripId}}"]
            },
            "description": "Xóa chuyến đi (không thể xóa chuyến đang chạy)"
          },
          "response": []
        }
      ],
      "description": "Trip management endpoints with real-time state tracking"
    },
    {
      "name": "Health Check",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:4000/health",
          "protocol": "http",
          "host": ["localhost"],
          "port": "4000",
          "path": ["health"]
        },
        "description": "Health check endpoint"
      },
      "response": []
    }
  ]
}
