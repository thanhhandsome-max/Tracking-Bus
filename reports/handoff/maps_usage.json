{
  "backendProxy": {
    "description": "All Google Maps APIs (except Places) are proxied through backend for caching and rate limiting",
    "apis": [
      {
        "name": "Directions API",
        "endpoint": "POST /maps/directions",
        "backendFile": "ssb-backend/src/controllers/MapsController.js",
        "serviceFile": "ssb-backend/src/services/MapsService.js",
        "frontendUsage": [
          {
            "file": "ssb-frontend/lib/api-client.ts",
            "function": "getDirections",
            "calledFrom": ["lib/hooks/useMaps.ts", "components/admin/route-builder.tsx"]
          }
        ],
        "caching": true,
        "cacheTTL": "CACHE_TTL_DIRECTIONS (21600s = 6h)"
      },
      {
        "name": "Distance Matrix API",
        "endpoint": "POST /maps/distance-matrix",
        "backendFile": "ssb-backend/src/controllers/MapsController.js",
        "serviceFile": "ssb-backend/src/services/MapsService.js",
        "frontendUsage": [
          {
            "file": "ssb-frontend/lib/api-client.ts",
            "function": "getDistanceMatrix",
            "calledFrom": ["lib/hooks/useMaps.ts"]
          }
        ],
        "caching": true,
        "cacheTTL": "CACHE_TTL_DISTANCE_MATRIX (120s = 2m)"
      },
      {
        "name": "Geocoding API",
        "endpoint": "POST /maps/geocode",
        "backendFile": "ssb-backend/src/controllers/MapsController.js",
        "serviceFile": "ssb-backend/src/services/MapsService.js",
        "frontendUsage": [
          {
            "file": "ssb-frontend/lib/api-client.ts",
            "function": "geocode",
            "calledFrom": ["lib/hooks/useMaps.ts"]
          }
        ],
        "caching": true,
        "cacheTTL": "CACHE_TTL_GEOCODE (86400s = 24h)"
      },
      {
        "name": "Reverse Geocoding API",
        "endpoint": "POST /maps/reverse-geocode",
        "backendFile": "ssb-backend/src/controllers/MapsController.js",
        "serviceFile": "ssb-backend/src/services/MapsService.js",
        "frontendUsage": [
          {
            "file": "ssb-frontend/lib/api-client.ts",
            "function": "reverseGeocode",
            "calledFrom": ["lib/hooks/useMaps.ts"]
          }
        ],
        "caching": true,
        "cacheTTL": "CACHE_TTL_GEOCODE (86400s = 24h)"
      },
      {
        "name": "Roads API (Snap to Roads)",
        "endpoint": "POST /maps/roads/snap",
        "backendFile": "ssb-backend/src/controllers/MapsController.js",
        "serviceFile": "ssb-backend/src/services/MapsService.js",
        "frontendUsage": [
          {
            "file": "ssb-frontend/lib/api-client.ts",
            "function": "snapToRoads",
            "calledFrom": ["lib/hooks/useMaps.ts"]
          }
        ],
        "caching": true,
        "cacheTTL": "CACHE_TTL_ROADS (900s = 15m)"
      }
    ],
    "rateLimiting": {
      "file": "ssb-backend/src/middlewares/mapsLimiter.js",
      "window": "RL_WINDOW (60s)",
      "maxMatrix": "RL_MAX_MATRIX (60 req/window)",
      "maxDirections": "RL_MAX_DIRECTIONS (30 req/window)"
    }
  },
  "frontendDirect": {
    "description": "Only Places API is called directly from frontend via Google Maps JavaScript SDK",
    "apis": [
      {
        "name": "Places API (Autocomplete)",
        "method": "Direct via Google Maps JS SDK",
        "loaderFile": "ssb-frontend/lib/maps/googleLoader.ts",
        "usage": [
          {
            "file": "components/admin/route-builder.tsx",
            "component": "Autocomplete input for address search",
            "library": "@googlemaps/js-api-loader with 'places' library"
          }
        ],
        "apiKey": "NEXT_PUBLIC_GMAPS_API_KEY",
        "libraries": ["places", "geometry", "routes"]
      },
      {
        "name": "Maps JavaScript API",
        "method": "Direct via Google Maps JS SDK",
        "loaderFile": "ssb-frontend/lib/maps/googleLoader.ts",
        "usage": [
          {
            "file": "components/map/SSBMap.tsx",
            "description": "Main map component"
          },
          {
            "file": "components/tracking/MapView.tsx",
            "description": "Tracking map view"
          },
          {
            "file": "components/driver/trip-map.tsx",
            "description": "Driver trip map"
          }
        ],
        "apiKey": "NEXT_PUBLIC_GMAPS_API_KEY"
      }
    ]
  },
  "noDirectCalls": {
    "note": "No direct calls to Google Maps REST APIs from frontend. All REST APIs go through backend proxy."
  }
}


